function OnUpload(){var a=$("#avatar").get(0).files;if(a.length>0)if(void 0!==window.FormData){var t=new FormData;for(i=0;i<a.length&&i<1;i++)t.append("file"+i,a[i]);$.ajax({type:"POST",url:location.protocol+"//"+location.host+"/"+$("#CurrentLang").val()+"/api/APIProfile/PostAvatar",contentType:!1,processData:!1,headers:{Authorization:"Bearer "+sessionStorage.getItem("accessToken")},data:t,success:function(a){a&&($(".avatar-ico").remove(),$(".avatar").append("<img class='avatar-ico' src='"+a[0].path+"' width='100' height='100' />"))},error:function(a){alert(a.responseText)}})}else alert("This browser doesnt support HTML5 multiple file uploads!")}function drop(a){a.stopPropagation(),a.preventDefault(),$(a.target).removeClass("over");var t=a.originalEvent.dataTransfer.files;if(t.length>0)if(void 0!==window.FormData){var e=new FormData;for(i=0;i<t.length&&i<1;i++)e.append("file"+i,t[i]);$.ajax({type:"POST",url:location.protocol+"//"+location.host+"/"+$("#CurrentLang").val()+"/api/APIProfile/PostAvatar",headers:{Authorization:"Bearer "+app.dataModel.getAccessToken()},contentType:!1,processData:!1,data:e,success:function(a){a&&($(".avatar-ico").remove(),$(".avatar").append("<img class='avatar-ico' src='"+a[0].path+"' width='100' height='100' />"))}})}else alert("your browser sucks!")}$(document).ready(function(){$("#uploadButton").click(OnUpload),$("#Location").autocomplete({source:function(a,t){$("#IsCheckedLocation").val("false");var e=a.term;e&&e.length>0&&$.getJSON(location.protocol+"//"+location.host+"/"+$("#CurrentLang").val()+"/api/APIProfile/cities?cityName="+e).done(function(a){var e=[];if(a)for(var o=0;o<a.length;o++){var n=a[o];e.push(n)}t(e)}).fail(function(){alert("Cities not found because some error happened: please, contact our support!")})},select:function(a,t){var e=t.item;return $("#Location").val(e.country+", "+e.town+(e.admin?", "+e.admin:"")+(e.admin1?", "+e.admin1:"")+(e.admin2?", "+e.admin2:"")),$("#IsCheckedLocation").val("true"),$.ajax({method:"get",url:location.protocol+"//"+location.host+"/"+$("#CurrentLang").val()+"/api/APIProfile/requestcity?woeid="+e.woeid,contentType:"application/json; charset=utf-8",success:function(){}}),!1}}).autocomplete("instance")._renderItem=function(a,t){return $("<li>").append("<a><b>"+t.country+"</b>, "+t.town+(t.admin?", "+t.admin:"")+(t.admin1?", "+t.admin1:"")+(t.admin2?", "+t.admin2:"")+"</a>").appendTo(a)}});